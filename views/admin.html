<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - CourseMaster</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="container">
    <nav class="navbar glass">
        <span class="nav-logo">
            <i class="fas fa-graduation-cap"></i>
            CourseMaster
            <span class="badge">ADMIN PANEL</span>
        </span>
        <div class="nav-links">
            <span id="userInfo" style="color: var(--text-light); margin-right: 20px;">
                <i class="fas fa-user-circle"></i> Loading...
            </span>
            <a href="/">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a href="#" id="refreshUsers">
                <i class="fas fa-sync-alt"></i> Refresh
            </a>
            <a href="#" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <header class="admin-header">
        <div class="admin-header-content">
            <h1 class="logo">⚙️ System Administration</h1>
            <p class="tagline">Advanced management controls for CourseMaster platform</p>

            <div class="stats">
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <span class="stat-count" id="totalUsers">2</span>
                    <span class="stat-label">Total Users</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-shield-alt"></i>
                    <span class="stat-count" id="adminUsers">1</span>
                    <span class="stat-label">Admins</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock"></i>
                    <span class="stat-count" id="serverUptime">0d 0h</span>
                    <span class="stat-label">Uptime</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-database"></i>
                    <span class="stat-count" id="dbSize">0 MB</span>
                    <span class="stat-label">Database</span>
                </div>
            </div>
        </div>
    </header>

    <main class="dashboard">
        <div class="dashboard-grid">
            <div class="crud-section glass">
                <div class="section-header">
                    <h2><i class="fas fa-user-plus"></i> Add New User</h2>
                </div>
                <div class="form-card">
                    <form id="addUserForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newUsername"><i class="fas fa-user"></i> Username *</label>
                                <input type="text" id="newUsername" placeholder="Enter username" required>
                            </div>
                            <div class="form-group">
                                <label for="newPassword"><i class="fas fa-lock"></i> Password *</label>
                                <input type="password" id="newPassword" placeholder="Enter password" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newRole"><i class="fas fa-user-tag"></i> Role *</label>
                                <select id="newRole" required>
                                    <option value="user">User</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="newUserId"><i class="fas fa-id-card"></i> User ID</label>
                                <input type="number" id="newUserId" placeholder="Auto-generated" disabled>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-user-plus"></i> Create User
                            </button>
                            <button type="reset" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Clear
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="crud-section glass">
                <div class="section-header">
                    <h2><i class="fas fa-users-cog"></i> User Management</h2>
                </div>
                <div class="form-card">
                    <div class="table-container" style="max-height: 400px;">
                        <table class="courses-table">
                            <thead>
                            <tr>
                                <th width="80">ID</th>
                                <th>USERNAME</th>
                                <th width="120">ROLE</th>
                                <th width="100">ACTIONS</th>
                            </tr>
                            </thead>
                            <tbody id="usersTableBody">
                            <tr>
                                <td colspan="4" class="empty-state">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Loading users...</p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="crud-section glass">
            <div class="section-header">
                <h2><i class="fas fa-tools"></i> System Tools</h2>
            </div>
            <div class="form-card">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <div class="tool-card">
                        <h3><i class="fas fa-database"></i> Database Maintenance</h3>
                        <p>Optimize and clean database</p>
                        <button class="btn btn-small btn-secondary" id="cleanDbBtn">
                            <i class="fas fa-broom"></i> Clean Database
                        </button>
                    </div>

                    <div class="tool-card">
                        <h3><i class="fas fa-file-export"></i> Data Export</h3>
                        <p>Export all system data</p>
                        <button class="btn btn-small btn-secondary" id="exportAllBtn">
                            <i class="fas fa-download"></i> Export All Data
                        </button>
                    </div>

                    <div class="tool-card">
                        <h3><i class="fas fa-chart-bar"></i> Analytics</h3>
                        <p>View detailed analytics</p>
                        <button class="btn btn-small btn-secondary" id="analyticsBtn">
                            <i class="fas fa-chart-line"></i> View Reports
                        </button>
                    </div>

                    <div class="tool-card">
                        <h3><i class="fas fa-cogs"></i> System Settings</h3>
                        <p>Configure platform settings</p>
                        <button class="btn btn-small btn-secondary" id="settingsBtn">
                            <i class="fas fa-sliders-h"></i> Configure
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="crud-section glass">
            <div class="section-header">
                <h2><i class="fas fa-server"></i> System Information</h2>
            </div>
            <div class="form-card">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div>
                        <h3 style="margin-bottom: 1rem; color: var(--primary);">
                            <i class="fas fa-info-circle"></i> Platform Info
                        </h3>
                        <div style="background: var(--gray-100); padding: 1.5rem; border-radius: var(--radius);">
                            <p><strong>Version:</strong> <span id="platformVersion">2.0.0</span></p>
                            <p><strong>Environment:</strong> <span id="environment">Development</span></p>
                            <p><strong>API Status:</strong> <span class="status-badge online">Online</span></p>
                            <p><strong>Database:</strong> <span class="status-badge online">Connected</span></p>
                        </div>
                    </div>

                    <div>
                        <h3 style="margin-bottom: 1rem; color: var(--primary);">
                            <i class="fas fa-exclamation-triangle"></i> Quick Actions
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <button class="btn btn-small btn-warning" id="clearCacheBtn">
                                <i class="fas fa-trash-alt"></i> Clear Cache
                            </button>
                            <button class="btn btn-small btn-info" id="diagnosticsBtn" style="background: var(--info); color: white;">
                                <i class="fas fa-stethoscope"></i> Run Diagnostics
                            </button>
                            <button class="btn btn-small btn-danger" id="resetDemoBtn">
                                <i class="fas fa-redo"></i> Reset Demo Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal" id="editUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Edit User</h3>
                <button class="modal-close" type="button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label for="editUsername"><i class="fas fa-user"></i> Username</label>
                        <input type="text" id="editUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="editRole"><i class="fas fa-user-tag"></i> Role</label>
                        <select id="editRole" required>
                            <option value="user">User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPassword"><i class="fas fa-lock"></i> New Password (Optional)</label>
                        <input type="password" id="editPassword" placeholder="Leave empty to keep current">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" id="editCancelBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-primary" type="button" id="editSaveBtn">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="confirmDeleteUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-slash"></i> Delete User</h3>
                <button class="modal-close" type="button">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; font-size: 1.1rem;">
                    Are you sure you want to delete user <strong id="deleteUserName">Loading...</strong>?
                </p>
                <div style="padding: 15px; background: rgba(239, 68, 68, 0.1); border-radius: 8px;">
                    <p style="margin: 0; color: var(--danger); font-size: 0.9rem;">
                        <i class="fas fa-exclamation-circle"></i>
                        This action cannot be undone. All user data will be permanently removed.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" id="deleteCancelBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-danger" type="button" id="deleteConfirmBtn">
                    <i class="fas fa-trash"></i> Delete User
                </button>
            </div>
        </div>
    </div>

    <footer class="admin-footer">
        <p>
            &copy; 2026 CourseMaster Admin Panel
            <span class="production-badge" id="envBadge">ADMINISTRATION</span>
        </p>
        <p class="api-status">
            Server Status:
            <span class="status-badge online" id="serverStatus">Online</span>
        </p>
        <p style="margin-top: 15px; opacity: 0.7; font-size: 0.9rem;">
            <i class="fas fa-shield-alt"></i> Restricted Access - Administrator Only
        </p>
    </footer>
</div>

<script src="/admin.js"></script>

<style>
    .tool-card {
        background: var(--gray-100);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        transition: var(--transition);
        border: 1px solid var(--gray-300);
    }

    .tool-card:hover {
        transform: translateY(-2px);
        border-color: var(--primary-light);
        box-shadow: var(--shadow);
    }

    .tool-card h3 {
        color: var(--dark);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .tool-card p {
        color: var(--gray-600);
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }

    @media (max-width: 768px) {
        .tool-card {
            padding: 1rem;
        }
    }
</style>
</body>
</html>
